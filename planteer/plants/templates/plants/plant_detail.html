{% extends 'main/base.html' %}

{% block title %}{{ plant.name }} - Planteer{% endblock %}

{% block content %}

<section class="plant-detail">
    <div class="plant-detail-main">
        <div class="plant-detail-image">
            {% if plant.image %}
                <img src="{{ plant.image.url }}" alt="{{ plant.name }}">
            {% endif %}
        </div>
        <div>
            <div class="plant-actions-header">
                <div class="plant-detail-info-title">{{ plant.name }}</div>
                <div class="plant-actions">
                    <a href="{% url 'plants:plant_update' plant_id=plant.id %}" class="btn-outline">Edit</a>
                    <a href="{% url 'plants:plant_delete' plant_id=plant.id %}" class="btn-delete">Delete</a>
                </div>
            </div>
            
            <div class="plant-detail-category">{{ plant.category|title }}</div>
            
            <div class="plant-detail-meta">

            <div class="plant-detail-meta">
                <p>{{ plant.description }}</p>

                {% if plant.native_to %}
                <p>
                    <span class="plant-detail-meta-label">Native to:</span>
                    {{ plant.native_to }}
                </p>
                {% endif %}

                {% if plant.used_for %}
                <p>
                    <span class="plant-detail-meta-label">Used for:</span>
                    {{ plant.used_for }}
                </p>
                {% endif %}
                
                <p><span class="plant-detail-meta-label">Is Edible:</span>
                   {{ plant.is_edible|yesno:"Yes,No" }}</p>
            </div>
        </div>
    </div>
    
    
    <div class="comments-section">
        <h3>Comments ({{ comments|length }})</h3>
        
        <div class="comment-form-container">
            <h4>Add your comment</h4>
            <form method="post" class="comment-form">
                {% csrf_token %}
                <div class="form-group">
                    <label class="form-label">Name</label>
                    {{ comment_form.name }}
                </div>
                <div class="form-group full-width">
                    <label class="form-label">Comment</label>
                    {{ comment_form.content }}
                </div>
                <button type="submit" class="btn">Submit Comment</button>
            </form>
        </div>

        {% for comment in comments %}
        <div class="comment-card">
            <div class="comment-header">
                <div class="comment-name">{{ comment.name }}</div>
                <div class="comment-date">
                    {{ comment.created_at|date:"F j, Y, P" }}
                </div>
            </div>
            <p class="comment-content">{{ comment.content }}</p>
        </div>
        {% empty %}
        <p class="no-comments">No comments yet. Be the first to comment!</p>
        {% endfor %}
    </div>
    
    <div class="related-section">
        <h3>Related Plants</h3>
        <div class="plants-grid">
            {% for p in related_plants %}
                <a href="{% url 'plants:plant_detail' p.id %}" class="plant-card">
                    <div class="plant-card-image">
                        {% if p.image %}
                            <img src="{{ p.image.url }}" alt="{{ p.name }}">
                        {% endif %}
                    </div>
                    <div class="plant-card-body">
                        <div class="plant-card-name">{{ p.name }}</div>
                        <div class="plant-card-brief">Brief about plant</div>
                        <div class="plant-card-category">{{ p.category|title }}</div>
                    </div>
                </a>
            {% empty %}
                <p>No related plants.</p>
            {% endfor %}
        </div>
    </div>
</section>

{% endblock %}